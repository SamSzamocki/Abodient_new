{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 \{"id":"iXHMrTw7UTJxLFdn","name":"Classifier_agent","active":false,"isArchived":false,"createdAt":"2025-05-18T15:09:09.844Z","updatedAt":"2025-05-18T15:09:09.844Z","nodes":[\{"parameters":\{"events":"worklfow_call","notice":"","outdatedVersionWarning":""\},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1,"position":[1240,20],"id":"fcde1dc1-6542-42d5-9553-fef584ccf7e4","name":"Execute Workflow Trigger","notesInFlow":false\},\{"parameters":\{"mode":"manual","duplicateItem":false,"assignments":\{"assignments":[\{"id":"dfd52e57-d37d-46ea-a155-2f081b7e189e","name":"contract_query","value":"=\{\{ $json.query \}\}","type":"string"\},\{"id":"670f28c5-64cd-4e1b-a300-c32df0e6a714","name":"chat_query","value":"=\{\{ $json.chatInput \}\}","type":"string"\},\{"id":"398b0a63-b28e-4542-8ae3-b218f76b1a77","name":"","value":"","type":"string"\}]\},"includeOtherFields":false,"options":\{\}\},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1460,20],"id":"67d49c0f-e283-4bc9-982e-4d2bb06a2a2f","name":"Edit Fields1"\},\{"parameters":\{"public":false,"options":\{\}\},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[1280,200],"id":"26085fef-4a5a-4f5b-9caa-d819fa00ed90","name":"When chat message received","webhookId":"dd19aabd-abba-469c-95ee-e11d0627d1dd"\},\{"parameters":\{"notice_tip":"","agent":"toolsAgent","promptType":"define","text":"=\{\{ $json.contract_query \}\}\{\{ $json.chat_query \}\}","hasOutputParser":false,"options":\{"systemMessage":"=You are an expert in providing a helpful assessment of the urgency and general responsibility of issues raised by tenants about their tenancy.  \\n\\n\\n***Available tool\\n-classifierInformation\\n\\n***Instructions\\nUse the classifierInformation tool to determine the urgency and responsibilities related to the type of issue raised\\n\\n***Tasks\\n1) understand the intent of the query based on the conversation history and 2) subsequently turn this into an efficient vector search query which you must pass to classifierInformation tool\\n\\n***Output\\n1 short paragraph summarising the key information. The summary should describe the situation and high level details around urgency and responsibility\\n\\n***Important\\nNEVER recommend the tenant reach out or report an issue to the landlord\\n\\nYour tone must be helpful, clear and friendly\\n"\},"credentials":""\},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[1860,40],"id":"4b4e7b1d-04e7-4993-b994-1eaca443ed87","name":"AI Agent"\},\{"parameters":\{"notice":"","name":"classifierInformation","description":"Returns the classification information about the query","topK":10\},"type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1,"position":[2060,300],"id":"90636a30-dbd1-4249-8bf2-66ec4b2b3fb6","name":"Vector Store Tool"\},\{"parameters":\{"mode":"retrieve","notice":"","pineconeIndex":\{"__rl":true,"value":"urgency-search","mode":"list","cachedResultName":"urgency-search"\},"options":\{"pineconeNamespace":"urgency-1"\}\},"type":"@n8n/n8n-nodes-langchain.vectorStorePinecone","typeVersion":1,"position":[1900,440],"id":"bb3ec10a-b594-4b0f-ac73-2bae4c14c141","name":"Pinecone Vector Store2","credentials":\{"pineconeApi":\{"id":"smzRdo3KiNPafnXx","name":"PineconeApi account"\}\}\},\{"parameters":\{"notice":"","model":"text-embedding-3-small","options":\{\}\},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[1940,600],"id":"8dc616fe-f9e6-42f6-b674-fc13bed471f4","name":"Embeddings OpenAI2","credentials":\{"openAiApi":\{"id":"ce4Dko4ewvOjQLgW","name":"OpenAi account"\}\}\},\{"parameters":\{"notice":"","model":"gpt-4o","options":\{\}\},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.1,"position":[2260,460],"id":"eb33c391-0e33-40b4-b8a5-6a956ee928c3","name":"OpenAI Chat Model","credentials":\{"openAiApi":\{"id":"ce4Dko4ewvOjQLgW","name":"OpenAi account"\}\}\},\{"parameters":\{"notice":"","model":"gpt-4o-mini","options":\{\}\},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.1,"position":[1740,260],"id":"e8edae2a-c026-40ba-abaf-b942f6eb31ca","name":"OpenAI Chat Model2","credentials":\{"openAiApi":\{"id":"ce4Dko4ewvOjQLgW","name":"OpenAi account"\}\}\},\{"parameters":\{"authentication":"oAuth2","resource":"sheet","operation":"read","documentId":\{"__rl":true,"value":"1R3eU9JH31TbKdzU47ed79i7Y9VBXG0CiVT3v28vXQkA","mode":"list","cachedResultName":"Abodient_dummy data","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1R3eU9JH31TbKdzU47ed79i7Y9VBXG0CiVT3v28vXQkA/edit?usp=drivesdk"\},"sheetName":\{"__rl":true,"value":601370855,"mode":"list","cachedResultName":"Sheet2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1R3eU9JH31TbKdzU47ed79i7Y9VBXG0CiVT3v28vXQkA/edit#gid=601370855"\},"filtersUI":\{\},"combineFilters":"AND","options":\{\}\},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[0,0],"id":"29c29e22-9d95-4d84-a6be-b403645e16f6","name":"Google Sheets"\},\{"parameters":\{"mode":"insert","pineconeIndex":\{"__rl":true,"value":"urgency-search","mode":"id"\},"options":\{"pineconeNamespace":"urgency-1"\}\},"type":"@n8n/n8n-nodes-langchain.vectorStorePinecone","typeVersion":1,"position":[520,80],"id":"8790f4d8-d97f-4b29-8c5f-eecdcbde9f49","name":"Pinecone Vector Store"\},\{"parameters":\{"notice":"","model":"text-embedding-3-small","options":\{\}\},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[480,300],"id":"a8d3e492-5fa8-439d-8e15-7166c9bafed2","name":"Embeddings OpenAI"\},\{"parameters":\{"notice":"","dataType":"binary","binaryMode":"allInputData","loader":"auto","options":\{\}\},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[620,300],"id":"d8f75bcc-7662-4d5a-9516-403d898930b0","name":"Default Data Loader1"\},\{"parameters":\{"notice":"","chunkSize":1000,"chunkOverlap":100,"options":\{\}\},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[620,480],"id":"b8cf42aa-672a-4ee0-8606-9b7db36afe10","name":"Recursive Character Text Splitter1"\},\{"parameters":\{"operation":"csv","binaryPropertyName":"data","options":\{\}\},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[220,0],"id":"ba8e375c-79ef-432a-b3c2-39e7a2360244","name":"Convert to File1"\},\{"parameters":\{"notice":"","sessionIdType":"customKey","sessionKey":"Take from previous node automatically","contextWindowLength":5\},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[1900,260],"id":"dd64ec1e-8a9f-47ce-81f8-cc9b44c2ddb8","name":"Window Buffer Memory"\}],"connections":\{"Execute Workflow Trigger":\{"main":[[\{"node":"Edit Fields1","type":"main","index":0\}]]\},"Edit Fields1":\{"main":[[\{"node":"AI Agent","type":"main","index":0\}]]\},"When chat message received":\{"main":[[\{"node":"Edit Fields1","type":"main","index":0\}]]\},"Pinecone Vector Store2":\{"ai_vectorStore":[[\{"node":"Vector Store Tool","type":"ai_vectorStore","index":0\}]]\},"Embeddings OpenAI2":\{"ai_embedding":[[\{"node":"Pinecone Vector Store2","type":"ai_embedding","index":0\}]]\},"OpenAI Chat Model":\{"ai_languageModel":[[\{"node":"Vector Store Tool","type":"ai_languageModel","index":0\}]]\},"Vector Store Tool":\{"ai_tool":[[\{"node":"AI Agent","type":"ai_tool","index":0\}]]\},"OpenAI Chat Model2":\{"ai_languageModel":[[\{"node":"AI Agent","type":"ai_languageModel","index":0\}]]\},"Google Sheets":\{"main":[[\{"node":"Convert to File1","type":"main","index":0\}]]\},"Embeddings OpenAI":\{"ai_embedding":[[\{"node":"Pinecone Vector Store","type":"ai_embedding","index":0\}]]\},"Default Data Loader1":\{"ai_document":[[\{"node":"Pinecone Vector Store","type":"ai_document","index":0\}]]\},"Recursive Character Text Splitter1":\{"ai_textSplitter":[[\{"node":"Default Data Loader1","type":"ai_textSplitter","index":0\}]]\},"Convert to File1":\{"main":[[\{"node":"Pinecone Vector Store","type":"main","index":0\}]]\}\},"settings":\{"executionOrder":"v1"\},"staticData":null,"pinData":\{\}\}}